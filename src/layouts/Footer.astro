---
import { getLocalizedPath } from '../lib/i18n';
import { getTranslation } from '../data/translations';
import type { Locale } from '../lib/i18n';

interface Props {
  locale?: Locale;
}

const { locale = 'ja' } = Astro.props;

// 翻訳データを取得
const footerText = getTranslation('footer', locale);

// Navigation items (Headerと同じ + ホームとお問い合わせ)
const navItems = [
  { label: footerText.nav.home, href: getLocalizedPath('/', locale) },
  { label: footerText.nav.brand, href: getLocalizedPath('/brand', locale) },
  { label: footerText.nav.franchise, href: getLocalizedPath('/franchise', locale) },
  { label: footerText.nav.support, href: getLocalizedPath('/franchise#section-franchise-support', locale) },
  { label: footerText.nav.faq, href: getLocalizedPath('/contact#section-faq', locale) },
  { label: footerText.nav.contact, href: getLocalizedPath('/contact#section-contact-form', locale) },
];

// 会社情報（電話番号とメールアドレスは言語に関係なく同じ）
const companyInfo = {
  phone: '06-6926-8286',
  emails: [
    { label: 'kawakami@tokumasa.net', href: 'mailto:kawakami@tokumasa.net' },
    { label: 'kato@tokumasa.net', href: 'mailto:kato@tokumasa.net' },
  ],
};

// 法的リンク
const legalLinks = [
  { label: 'プライバシーポリシー', href: '#' },
  { label: 'cookieについて', href: '#' },
];
---

<footer class="l-footer">
  <div class="l-container">
  <div class="l-footer__inner">
    <!-- アクセス情報 -->
    <div class="l-footer__access">
      <!-- Logo -->
      <a href={getLocalizedPath('/', locale)} class="l-footer__logo">
        <img src="/logo.svg" alt={footerText.logoAlt} width={100} height={100} />
      </a>

      <!-- 会社情報 -->
      <div class="l-footer__info">
        <div class="l-footer__address">
          <span class="l-footer__label">{footerText.labels.address}</span>
          <span class="l-footer__text">
           <span class="l-footer__postal-code">{footerText.companyInfo.postalCode}</span>
           <span class="l-footer__address-text">{footerText.companyInfo.address}</span>
          </span>
        </div>

        <div class="l-footer__contact">
          <span class="l-footer__label">{footerText.labels.contact}</span>
          <div class="l-footer__contact-details">
            <a href={`tel:${companyInfo.phone}`} class="l-footer__phone">
              {companyInfo.phone}
            </a>
            <div class="l-footer__emails">
              {companyInfo.emails.map((email) => (
                <a href={email.href} class="l-footer__email">
                  {email.label}
                </a>
              ))}
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ナビゲーション -->
    <nav class="l-footer__nav" aria-label={footerText.ariaLabel}>
      <ul class="l-footer__nav-list">
        {navItems.map((item) => (
          <li class="l-footer__nav-item">
            <a href={item.href} class="l-footer__nav-link">
              {item.label}
            </a>
          </li>
        ))}
      </ul>
    </nav>
     <!-- 下部: 法的リンクと著作権 -->
  <div class="l-footer__bottom">
    <div class="l-footer__bottom-inner">
      <p class="l-footer__copyright">{footerText.copyright}</p>
      <div class="l-footer__legal">
        <a href={getLocalizedPath('/privacy', locale)} class="l-footer__legal-link">
          {footerText.legal.privacy}
        </a>
        <a href={getLocalizedPath('/cookie', locale)} class="l-footer__legal-link">
          {footerText.legal.cookie}
        </a>
      </div>
    </div>
  </div>
  </div>
  </div>
</footer>

