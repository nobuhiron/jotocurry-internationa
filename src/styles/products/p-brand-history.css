.p-brand-history {
}

.p-brand-history__inner {
  background-color: var(--color-white);
  padding: var(--spacing-2xl);
}

.p-brand-history__intro {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--spacing-xl);
}

@media (--lg) {
  .p-brand-history__intro {
    grid-template-columns: 1fr auto;
    align-items: start;
    gap: var(--spacing-2xl);
  }
}

.p-brand-history__intro-text {
  font-size: var(--font-size-base);
  line-height: var(--line-height-base);
  color: var(--color-text);
  margin: 0;
}

.p-brand-history__button {
  display: flex;
  justify-content: flex-start;
}

@media (--lg) {
  .p-brand-history__button {
    justify-content: flex-end;
  }
}

.p-brand-history__timeline {
  display: grid;
  grid-template-columns: 1fr;
  position: relative;
}

/* タイムライン全体の縦線 */
.p-brand-history__timeline::before {
  content: '';
  position: absolute;
  left: 0px;
  top: 0;
  width: 2px;
  /* 初期状態：最初のアイテムのドット位置まで表示（JavaScriptで動的に計算される） */
  height: var(--timeline-initial-height, 92px);
  background-color: var(--color-pale-beige);
  transition: height 1.5s ease;
  z-index: 0;
}

/* アニメーション有効時：線が下に伸びる（JavaScriptで動的に計算される） */
.p-brand-history__timeline.is-animated::before {
  height: var(--timeline-final-height);
}

.p-brand-history__item {
  position: relative;
  padding-block: var(--spacing-2xl);
  padding-inline-start: 0;
  /* 全てのアイテムを初期状態で表示 */
  opacity: 1;
}

@media (--lg) {
  .p-brand-history__item {
    padding-inline-start: 0;
  }
}

/* 各アイテムの個別線は非表示（全体線を使用） */
.p-brand-history__item::after {
  display: none;
}

.p-brand-history__item-header {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  margin-block-start: calc(var(--spacing-2xl) + 6px);
  margin-block-end: var(--spacing-lg);
  padding-inline-start: 24px;
  position: relative;
  z-index: 1;
}

.p-brand-history__item-header::before {
  content: '';
  flex-shrink: 0;
  width: 12px;
  height: 12px;
  background-color: var(--color-accent-warm);
  border-radius: var(--radius-xl);
  border: 2px solid var(--color-white);
  /* ドットの中心を線の中心に合わせる */
  /* 線は left: 6px, width: 2px なので中心は 7px */
  /* ドットは width: 12px なので、左端を 1px にする */
  position: absolute;
  left: -5px;
  /* 全てのドットを初期状態で表示 */
  opacity: 1;
  transform: scale(1);
  transition: transform 0.6s ease;
  z-index: 2;
}

/* アニメーション有効時：各アイテムのドットが大きくなる */
.p-brand-history__item.is-active .p-brand-history__item-header::before {
  transform: scale(1.5);
}

/* ドットの周囲に円上の線を追加 */
.p-brand-history__item-header::after {
  content: '';
  position: absolute;
  left: 1px;
  top: 50%;
  transform: translate(-50%, -50%) scale(0);
  width: 12px;
  height: 12px;
  border: 2px solid var(--color-accent-warm);
  border-radius: 50%;
  opacity: 0;
  transition: transform 0.6s ease, opacity 0.6s ease;
  z-index: 1;
}

/* アニメーション有効時：各アイテムのドット周囲に円上の線が表示 */
.p-brand-history__item.is-active .p-brand-history__item-header::after {
  transform: translate(-50%, -50%) scale(2);
  opacity: 0.6;
}

.p-brand-history__item-year {
  font-size: clamp(1.25rem, 3vw, 1.5rem);
  font-weight: var(--fw-bold);
  color: var(--color-accent-warm);
  margin: 0;
  line-height: 1;
  display: flex;
  align-items: center;
}

.p-brand-history__item-content {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--spacing-2xl);
}

@media (--md) {
  .p-brand-history__item-content {
    grid-template-columns: 1fr 1fr;
    gap: var(--spacing-2xl);
    align-items: center;
    padding-inline-start: var(--spacing-3xl);
  }
}

.p-brand-history__item-image {
  width: 100%;
}

.p-brand-history__item-text {
  font-size: var(--font-size-base);
  line-height: var(--line-height-base);
  color: var(--color-text);
}

.p-brand-history__item-heading {
  font-size: clamp(1.125rem, 2.5vw, 1.25rem);
  font-weight: var(--fw-bold);
  color: var(--color-text);
  margin-block-end: var(--spacing-md);
  margin-block-start: 0;
}

.p-brand-history__item-description {
  margin: 0;
}

.p-brand-history__item-image-img {
  width: 100%;
  height: auto;
  aspect-ratio: 4 / 3;
  object-fit: cover;
  border-radius: var(--radius-md);
}

/* アクセシビリティ: アニメーションを減らす設定に対応 */
@media (prefers-reduced-motion: reduce) {
  .p-brand-history__timeline::before,
  .p-brand-history__item-header::before,
  .p-brand-history__item-header::after {
    transition: none;
  }

  .p-brand-history__item-header::before {
    transform: scale(1);
  }

  .p-brand-history__item-header::after {
    transform: translate(-50%, -50%) scale(0);
    opacity: 0;
  }

  .p-brand-history__timeline::before {
    height: var(--timeline-final-height, 100%);
  }
}
