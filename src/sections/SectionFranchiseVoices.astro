---
import SectionTitle from '../components/SectionTitle.astro';
import { translations } from '../data/translations';
import type { Locale } from '../lib/i18n';

interface Props {
  locale?: Locale;
}

const { locale = 'ja' } = Astro.props;
const voicesText = translations.franchise.voices[locale];
---

<section class="p-franchise-voices l-section" data-bg="white">
  <div class="l-container">
    <div class="p-franchise-voices__inner l-section__inner">
      <SectionTitle
        title={voicesText.title}
        subtitle={voicesText.subtitle}
        class="p-franchise-voices__title"
      />
      <div class="p-franchise-voices__carousel splide" id="franchise-voices-carousel">
        <div class="splide__track">
          <ul class="splide__list">
            {voicesText.testimonials.map((testimonial) => (
              <li class="splide__slide">
                <div class="p-franchise-voices__slide">
                  <p class="p-franchise-voices__text">{testimonial.text}</p>
                  <div class="p-franchise-voices__profile">
                    <div class="p-franchise-voices__avatar" aria-hidden="true"></div>
                    <p class="p-franchise-voices__store-name">{testimonial.storeName}</p>
                  </div>
                </div>
              </li>
            ))}
          </ul>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  import initFranchiseVoices from '../scripts/franchise-voices.js';

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initFranchiseVoices);
  } else {
    initFranchiseVoices();
  }
</script>

